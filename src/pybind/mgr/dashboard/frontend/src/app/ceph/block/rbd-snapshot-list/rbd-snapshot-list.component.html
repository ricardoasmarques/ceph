<cd-table [data]="data"
          columnMode="flex"
          selectionType="single"
          (updateSelection)="updateSelection($event)"
          [columns]="columns">
  <div class="table-actions">
    <div class="btn-group" dropdown>
      <button type="button"
              class="btn btn-sm btn-primary"
              *ngIf="!selection.hasSingleSelection"
              (click)="openCreateSnapshotModal()">
        <i class="fa fa-fw fa-plus"></i>Create
      </button>
      <button type="button"
              class="btn btn-sm btn-primary"
              *ngIf="selection.hasSingleSelection"
              [ngClass]="{'disabled': selection.first().executing}"
              (click)="openEditSnapshotModal()">
        <i class="fa fa-fw fa-pencil"></i>Rename
      </button>
      <button type="button" dropdownToggle class="btn btn-sm btn-primary dropdown-toggle dropdown-toggle-split">
        <span class="caret"></span>
        <span class="sr-only"></span>
      </button>
      <ul *dropdownMenu class="dropdown-menu" role="menu">
        <li role="menuitem"><a class="dropdown-item" (click)="openCreateSnapshotModal()"><i class="fa fa-fw fa-plus"></i>Create</a></li>
        <li role="menuitem"
            [ngClass]="{'disabled': !selection.hasSingleSelection || selection.first().executing}"><a class="dropdown-item" (click)="openEditSnapshotModal()"><i class="fa fa-fw fa-pencil"></i>Rename</a></li>
        <li role="menuitem"
            [ngClass]="{'disabled': !selection.hasSingleSelection}"><a class="dropdown-item" (click)="deleteSnapshotModal()"><i class="fa fa-fw fa-trash-o"></i>Delete</a></li>
      </ul>
    </div>
  </div>
</cd-table>

<!-- TODO: Move to `CellTemplate` so it can be reused -->
<ng-template #nameTpl
             let-row="row"
             let-value="value">
  <i class="fa fa-spinner fa-spin fa-fw"
     *ngIf="row.executing"></i>
  {{ value }}
  <span *ngIf="row.executing"
        class="text-muted italic">({{ row.executing }}... )</span>
</ng-template>

<ng-template #protectTpl
             let-value="value">
  <span *ngIf="value" class="label label-success">PROTECTED</span>
  <span *ngIf="!value" class="label label-info">UNPROTECTED</span>
</ng-template>
